<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Setting up Git with SSH on Windows with PowerShell</title><link href=//cdn.jsdelivr.net rel=dns-prefetch><link href=//cdnjs.cloudflare.com rel=dns-prefetch><link href=//at.alicdn.com rel=dns-prefetch><link href=//fonts.googleapis.com rel=dns-prefetch><link href=//fonts.gstatic.com rel=dns-prefetch><link href=///disqus.com rel=dns-prefetch><link href=//c.disquscdn.com rel=dns-prefetch><link href=//www.google-analytics.com rel=dns-prefetch><meta name=author content="Scott Guymer"><meta name=description content="When you activate 2FA on your GitHub account using HTTPS becomes a little more difficult because you can&amp;rsquo;t simply use your password anymore.
The simple solution is to use a PAT token as your password when prompted from the command line.
But managing these tokens can be a bit of pain.
You can also clone using SSH. For our Mac and Linux friends, we know it&amp;rsquo;s easy, it should be on windows, but it isn&amp;rsquo;t yet&amp;hellip;"><meta name=twitter:card content="summary"><meta name=twitter:site content="@mr_scottguymer"><meta name=twitter:title content="Setting up Git with SSH on Windows with PowerShell"><meta name=twitter:description content="When you activate 2FA on your GitHub account using HTTPS becomes a little more difficult because you can&amp;rsquo;t simply use your password anymore.
The simple solution is to use a PAT token as your password when prompted from the command line.
But managing these tokens can be a bit of pain.
You can also clone using SSH. For our Mac and Linux friends, we know it&amp;rsquo;s easy, it should be on windows, but it isn&amp;rsquo;t yet&amp;hellip;"><meta name=twitter:image content="/images/scottguymer.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Setting up Git with SSH on Windows with PowerShell"><meta property="og:description" content="When you activate 2FA on your GitHub account using HTTPS becomes a little more difficult because you can&amp;rsquo;t simply use your password anymore.
The simple solution is to use a PAT token as your password when prompted from the command line.
But managing these tokens can be a bit of pain.
You can also clone using SSH. For our Mac and Linux friends, we know it&amp;rsquo;s easy, it should be on windows, but it isn&amp;rsquo;t yet&amp;hellip;"><meta property="og:url" content="https://www.scottguymer.co.uk/post/setting-up-git-with-ssh-on-windows-with-powershell/"><meta property="og:image" content="/images/scottguymer.jpg"><meta name=generator content="Hugo 0.64.0"><link rel=canonical href=https://www.scottguymer.co.uk/post/setting-up-git-with-ssh-on-windows-with-powershell/><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no,email=no,adress=no"><meta http-equiv=cache-control content="no-transform"><meta name=robots content="index,follow"><meta name=referrer content="origin-when-cross-origin"><meta name=google-site-verification content="Rop88G3o4ZxIlfG_B3VHOKboh8LM_UpKZTB1d1CTbIE"><meta name=theme-color content="#02b875"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=apple-mobile-web-app-title content="Scott Guymer"><meta name=msapplication-tooltip content="Scott Guymer"><meta name=msapplication-navbutton-color content="#02b875"><meta name=msapplication-TileColor content="#02b875"><meta name=msapplication-TileImage content="/icons/icon-144x144.png"><link rel=icon href=https://www.scottguymer.co.uk/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.scottguymer.co.uk/icons/icon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.scottguymer.co.uk/icons/icon-32x32.png><link rel=icon sizes=192x192 href=https://www.scottguymer.co.uk/icons/icon-192x192.png><link rel=apple-touch-icon href=https://www.scottguymer.co.uk/icons/icon-152x152.png><link rel=manifest href=https://www.scottguymer.co.uk/manifest.json><link rel=preload href=https://www.scottguymer.co.uk/styles/main-rendered.min.css as=style><link rel=preload href="https://fonts.googleapis.com/css?family=Lobster" as=style><link rel=preload href=https://www.scottguymer.co.uk/images/scottguymer.jpg as=image><link rel=preload href=https://www.scottguymer.co.uk/images/grey-prism.svg as=image><style>body{background:#f4f3f1url(/images/grey-prism.svg)repeat fixed}</style><link rel=stylesheet href=https://www.scottguymer.co.uk/styles/main-rendered.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lobster"><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.2/dist/medium-zoom.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video-js.min.css><!--[if lte IE 8]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script><script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><script src=https://cdn.jsdelivr.net/npm/videojs-ie8@1.1.2/dist/videojs-ie8.min.js></script><![endif]--><!--[if lte IE 9]><script src=https://cdn.jsdelivr.net/npm/eligrey-classlist-js-polyfill@1.2.20180112/classList.min.js></script><![endif]--></head><body><div class=suspension><a role=button aria-label="Go to top" title="Go to top" class="to-top is-hide"><span class="icon icon-up" aria-hidden=true></span></a><a role=button aria-label="Go to comments" title="Go to comments" class=to-comment href=#disqus_thread><span class="icon icon-comment" aria-hidden=true></span></a></div><header class=site-header><a href=https://www.scottguymer.co.uk/><img class=avatar src=https://www.scottguymer.co.uk/images/scottguymer.jpg alt=Avatar></a><h2 class=title><a href=https://www.scottguymer.co.uk/>Scott Guymer</a></h2><p class=subtitle>~ Software Engineer ~</p><button class=menu-toggle type=button aria-label="Main Menu" aria-expanded=false tab-index=0>
<span class="icon icon-menu" aria-hidden=true></span></button><nav class="site-menu collapsed"><h2 class=offscreen>Main Menu</h2><ul class=menu-list><li class="menu-item
is-active"><a href=https://www.scottguymer.co.uk/>Home</a></li><li class=menu-item><a href=https://www.scottguymer.co.uk/tags/>Tags</a></li><li class=menu-item><a href=https://www.scottguymer.co.uk/about/>About</a></li></ul></nav><nav class="social-menu collapsed"><h2 class=offscreen>Social Networks</h2><ul class=social-list><li class=social-item><a href=mailto:blog@scottguymer.co.uk title=Email aria-label=Email><span class="icon icon-email" aria-hidden=true></span></a></li><li class=social-item><a href=//github.com/scottguymer rel=me title=GitHub aria-label=GitHub><span class="icon icon-github" aria-hidden=true></span></a></li><li class=social-item><a href=//twitter.com/mr_scottguymer rel=me title=Twitter aria-label=Twitter><span class="icon icon-twitter" aria-hidden=true></span></a></li><li class=social-item><a href=//www.linkedin.com/in/scottguymer rel=me title=LinkedIn aria-label=LinkedIn><span class="icon icon-linkedin" aria-hidden=true></span></a></li></ul></nav></header><section class="main post-detail"><header class=post-header><h1 class=post-title>Setting up Git with SSH on Windows with PowerShell</h1><p class=post-meta>@Scott Guymer · Oct 8, 2021 · 2 min read</p></header><article class=post-content><p>When you activate 2FA on your GitHub account using HTTPS becomes a little more difficult because you can&rsquo;t simply use your password anymore.</p><p>The simple solution is to use a <a href=https://github.com/settings/tokens>PAT token</a> as your password when prompted from the command line.</p><p>But managing these tokens can be a bit of pain.</p><p>You can also clone using SSH. For our Mac and Linux friends, we know it&rsquo;s easy, it should be on windows, but it isn&rsquo;t yet&mldr;</p><p>Firstly, you do not need any &ldquo;extra&rdquo; software or plugins like PuTTY anymore, in Windows 10 there is a native SSH agent that we can use.</p><p>Let&rsquo;s use PowerShell&mldr;</p><p>Sometimes the SSH client isn&rsquo;t installed, <a href=https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse>we can install it as a Windows capability</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
</code></pre></div><p>Sometimes the SSH client isn&rsquo;t turned on. Let&rsquo;s set it to automatic start and start it now</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Get-Service -Name ssh-agent | Set-Service -StartupType Automatic
Start-Service ssh-agent
</code></pre></div><p>At this point you will have a working SSH client with no keys. Let&rsquo;s test that out. This should connect but you will get an authentication error.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>ssh git@github.com
</code></pre></div><p>Now we need a new key so we can tell GitHub who we are and prove it</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>ssh-keygen <span style=color:#75715e>#change name/password as prompted</span>
</code></pre></div><p>Now we tell the SSH client about the key we just created so it can use it to connect to things.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>ssh-add C:\Users\&lt;your_user&gt;\.ssh\id_rsa
Identity added<span style=color:#960050;background-color:#1e0010>:</span> C:\Users\&lt;your_user&gt;\.ssh\id_rsa (C:\Users\&lt;your_user&gt;\.ssh\id_rsa)
</code></pre></div><p>Next, we need to tell GitHub about the key so let&rsquo;s copy the public key to our clipboard</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>cat ~/.ssh/id_rsa.pub | clip
</code></pre></div><p><a href=https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account>Then you need to add the public key to your account using the instructions here</a></p><p><strong>!Important!</strong> If you are part of a GitHub org that uses SSO you need make sure you click Enable SSO and authorize for your org.</p><p>The last step is to tell your local git about your new SSH client and make sure it knows where to find it. You need to set an env var for this. We can do this temporarily like this</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>$env:GIT_SSH = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>C:\Windows\System32\OpenSSH\ssh.exe</span><span style=color:#e6db74>&#34;</span>
</code></pre></div><p>I would suggest adding this to your PowerShell profile or to the system environment variables using the windows dialogue.</p><p>Now you should be all set to clone your repos over SSH</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>git clone git@github.com<span style=color:#960050;background-color:#1e0010>:</span>philips-internal/my-repo.git
</code></pre></div><p>When copying the link to your repo make sure you select the SSH tab in the clone dialogue.</p><p><img src=https://www.scottguymer.co.uk/uploads/2021/10/08/git_clone.png alt="Git Clone Dialog"></p><p>I have open sourced my own PowerShell Profile which sets up some of these things and makes sure that they will always work for me. <a href=https://github.com/ScottGuymer/powershell-profile/>You can get some inspiration here.</a></p></article><footer class=post-footer><ul class=post-tags><li><a href=https://www.scottguymer.co.uk/tags/git><span class=tag>Git</span></a></li><li><a href=https://www.scottguymer.co.uk/tags/ssh><span class=tag>SSH</span></a></li><li><a href=https://www.scottguymer.co.uk/tags/windows><span class=tag>Windows</span></a></li></ul><p class=post-copyright>© This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License，please give source if you wish to quote or reproduce.</p></footer><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"scottguymer"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><footer class=site-footer><p>© 2017-2021 Scott Guymer</p><p>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> with theme <a href=https://github.com/laozhu/hugo-nuo target=_blank rel=noopener>Nuo</a>.</p></footer><script src=https://cdn.jsdelivr.net/npm/smooth-scroll@15.0.0/dist/smooth-scroll.min.js></script><script async src=https://cdn.jsdelivr.net/npm/video.js@7.3.0/dist/video.min.js></script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    },
  });
</script><script type=text/x-mathjax-config>
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script><script src=https://www.scottguymer.co.uk/scripts/index.min.js></script><script>if('serviceWorker'in navigator){navigator.serviceWorker.register('\/service-worker.js').then(function(){console.log('[ServiceWorker] Registered');});}</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-113812052-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>